function init(){myMap=new ymaps.Map(mapDiv,{center:[59.93888,30.32843],zoom:16}),myPlacemark=new ymaps.Placemark([59.938691,30.323044],{},{iconLayout:"default#image",iconImageHref:"img/pin.png",iconImageSize:[218,142],iconImageOffset:[-45,-132]}),myMap.geoObjects.add(myPlacemark)}ymaps.ready(init);var mapDiv=document.querySelector(".yandex-map"),myMap,myPlacemark,link=document.querySelector(".button.feedback-link"),popup=document.querySelector(".modal-feedback"),close=popup.querySelector(".modal-close"),overlay=document.querySelector(".modal-overlay"),form=popup.querySelector("form"),author=popup.querySelector("[name=feedback-author]"),email=popup.querySelector("[name=feedback-email]"),message=popup.querySelector("[name=feedback-text]"),storage=localStorage.getItem("author");link.addEventListener("click",function(e){e.preventDefault(),popup.classList.add("modal-show"),overlay.classList.add("overlay-show"),storage?(author.value=storage,email.focus()):author.focus()}),close.addEventListener("click",function(e){e.preventDefault(),popup.classList.remove("modal-show"),popup.classList.remove("modal-error"),overlay.classList.remove("overlay-show")}),form.addEventListener("submit",function(e){author.value&&email.value&&message.value?localStorage.setItem("author",author.value):(e.preventDefault(),popup.classList.remove("modal-error"),popup.offsetWidth=popup.offsetWidth,popup.classList.add("modal-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&popup.classList.contains("modal-show")&&(popup.classList.remove("modal-show"),popup.classList.remove("modal-error"),overlay.classList.remove("overlay-show"))});
